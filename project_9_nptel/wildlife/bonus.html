<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bonus week</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        
        /* Custom radio button styling */
        .option-label {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        .dark .option-label {
            border: 1px solid #374151;
        }

        /* Hover and Selected Styles */
        .option-label:hover {
            border-color: #34d399; /* Lighter Green for subtle hover */
            background-color: #f0fdf4; 
        }
        .dark .option-label:hover {
            background-color: #1f2937;
        }

        .option-label.selected {
            border-color: #059669; /* Primary color when selected */
            background-color: #d1fae5; /* Lightest green for selected state */
        }
        .dark .option-label.selected {
            background-color: #065f46;
            border-color: #059669;
        }
        
        /* Visually hide the default radio input */
        input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }

        /* Style for the visual selection indicator (optional, but good UX) */
        input[type="radio"]:checked + .option-text {
            font-weight: 600;
        }
        
        /* Feedback Styles (set by JS after submission) */
        .feedback-correct {
            border-color: #10b981 !important; /* Green */
            background-color: #ecfdf5 !important;
        }
        .dark .feedback-correct {
            background-color: #064e3b !important;
        }
        
        .feedback-incorrect {
            border-color: #ef4444 !important; /* Red */
            background-color: #fef2f2 !important;
        }
        .dark .feedback-incorrect {
            background-color: #7f1d1d !important;
        }

        /* Disabled state after submission */
        .quiz-submitted .option-label {
            pointer-events: none;
            cursor: default;
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class', 
            theme: {
                extend: {
                    colors: {
                        'primary': '#059669', /* Emerald Green */
                        'secondary': '#f59e0b', /* Amber */
                    },
                }
            }
        }
    </script>
</head>
<body class="min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-500">

    <header class="bg-white dark:bg-gray-800 shadow-lg py-6 mb-10 border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <h1 class="text-3xl font-bold text-center">Ecology & Behavior Quiz (9 Questions)</h1>
            <p class="text-center text-gray-600 dark:text-gray-400 mt-1">Total Questions: 9 | Max Score: 9 Points</p>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pb-16">
        
        <div id="result-box" class="hidden bg-primary/10 border-l-4 border-primary text-primary-900 p-4 mb-8 rounded-lg dark:text-gray-100 dark:bg-primary/20 dark:border-primary">
            <div class="flex items-center space-x-3">
                <i data-lucide="award" class="w-6 h-6"></i>
                <div>
                    <h2 class="font-bold text-xl text-primary-800 dark:text-white">Quiz Results</h2>
                    <p id="score-text" class="text-lg text-primary-700 dark:text-primary-200"></p>
                </div>
            </div>
        </div>

        <form id="quiz-form" class="space-y-8">
            <script>
                // Fisher-Yates (Knuth) Shuffle Algorithm
                function shuffleArray(array) {
                    for (let i = array.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [array[i], array[j]] = [array[j], array[i]];
                    }
                    return array;
                }
                
                // DATA FOR THE FIRST 9 QUESTIONS
                const originalQuizData = [
                    {
                        question: "The fig tree bears fruits in times when animals do not have much access to food. In this context, it would be a good example of",
                        options: ["keystone species", "least concern species"],
                        correctAnswer: "keystone species"
                    },
                    {
                        question: "People come to Sessa orchid sanctuary in Arunachal Pradesh to witness orchids, which in this context would be classified as",
                        options: ["keystone species", "extinct species", "umbrella species", "flagship species"],
                        correctAnswer: "flagship species"
                    },
                    {
                        question: "The tiger has a home range of several square kilometres, regulates the ecosystem through controlling herbivore populations and trophic cascades, and people come to tiger reserves to watch tigers. Thus, the tiger can be called as",
                        options: ["flagship species", "umbrella species", "keystone species", "all of the above"],
                        correctAnswer: "all of the above"
                    },
                    {
                        question: "The elephant has a home range of several square kilometres, regulates the ecosystem by its habit of destructive feeding, and people can relate to this animal which is important for conservation Given this background, the elephant can be called as",
                        options: ["umbrella species", "keystone species", "all of the above", "flagship species"],
                        correctAnswer: "all of the above"
                    },
                    {
                        question: "Consider the food chain: Grass → Grasshopper → Frog → Snake → Hawk. In this food chain,",
                        options: ["grass is decomposer", "grass is herbivore", "grass is producer", "grass is consumer"],
                        correctAnswer: "grass is producer"
                    },
                    {
                        question: "Consider the food chain: Grass → Grasshopper → Frog → Snake → Hawk. In this food chain,",
                        options: ["grasshopper is carnivore", "grasshopper is consumer", "grasshopper is producer", "grasshopper is decomposer"],
                        correctAnswer: "grasshopper is consumer"
                    },
                    {
                        question: "Which of the following best describes habitat selection?",
                        options: ["Habitat selection has both innate and learnt components.", "Habitat selection is neither innate nor learnt.", "Habitat selection is completely innate.", "Habitat selection is completely learnt."],
                        correctAnswer: "Habitat selection has both innate and learnt components."
                    },
                    {
                        question: "The regular, seasonal movement of animals, often along fixed routes is called",
                        options: ["translocation", "drifting", "migration", "dispersal"],
                        correctAnswer: "migration"
                    },
                    {
                        question: "Transplantation experiments are used to find",
                        options: ["potential range", "effective range", "actual range", "economic range"],
                        correctAnswer: "potential range"
                    }
                ];

                // Shuffle the questions for a fresh experience each time
                const quizData = shuffleArray(originalQuizData);
                const totalQuestions = quizData.length;

                // Function to render the quiz questions
                function renderQuiz() {
                    const form = document.getElementById('quiz-form');
                    form.innerHTML = ''; // Clear existing content

                    quizData.forEach((item, index) => {
                        const qNumber = index + 1;
                        
                        // Shuffle options for the current question
                        const shuffledOptions = shuffleArray([...item.options]);
                        
                        const questionHtml = `
                            <div class="question-container p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700" data-question-index="${index}">
                                <p class="text-xl font-semibold mb-6 text-gray-800 dark:text-white">
                                    <span class="text-primary mr-2">${qNumber}.</span> ${item.question}
                                </p>
                                <div class="options-group space-y-4">
                                    ${shuffledOptions.map((option, optIndex) => `
                                        <div>
                                            <label class="option-label text-gray-700 dark:text-gray-300 hover:border-primary dark:hover:border-primary" for="q${qNumber}-opt${optIndex}">
                                                <input type="radio" id="q${qNumber}-opt${optIndex}" name="question-${index}" value="${option}">
                                                <span class="option-text ml-4 text-base w-full">${option}</span>
                                            </label>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `;
                        form.innerHTML += questionHtml;
                    });

                    // Add the submit button at the end
                    const submitButtonHtml = `
                        <div class="pt-8 flex justify-center">
                            <button type="submit" id="submit-quiz-btn" class="px-8 py-3 bg-primary text-white text-lg font-semibold rounded-full shadow-lg hover:bg-green-700 transition duration-300">
                                Submit and Show Results
                            </button>
                        </div>
                    `;
                    form.innerHTML += submitButtonHtml;
                    
                    // Attach click listener to all radio buttons for visual selection
                    document.querySelectorAll('input[type="radio"]').forEach(radio => {
                        radio.addEventListener('click', function() {
                            // Find the options group for this question
                            const optionsGroup = this.closest('.options-group');
                            // Remove 'selected' class from all options in this group
                            optionsGroup.querySelectorAll('.option-label').forEach(label => {
                                label.classList.remove('selected');
                            });
                            // Add 'selected' class to the label of the clicked radio button
                            this.closest('.option-label').classList.add('selected');
                        });
                    });
                }

                // Function to handle quiz submission and grading
                function handleSubmit(event) {
                    event.preventDefault();
                    
                    if (document.getElementById('quiz-form').classList.contains('quiz-submitted')) {
                        return;
                    }

                    let score = 0;
                    
                    quizData.forEach((item, index) => {
                        const qContainer = document.querySelector(`[data-question-index="${index}"]`);
                        const selectedOption = document.querySelector(`input[name="question-${index}"]:checked`);
                        const options = qContainer.querySelectorAll('.option-label');
                        
                        let isCorrect = false;

                        if (selectedOption) {
                            if (selectedOption.value === item.correctAnswer) {
                                score++;
                                isCorrect = true;
                            }
                        }

                        // Apply feedback styling to all options
                        options.forEach(label => {
                            const input = label.querySelector('input');
                            
                            // Remove selected state to prepare for final feedback
                            label.classList.remove('selected'); 

                            // Check if the current option is the correct answer
                            if (input.value === item.correctAnswer) {
                                label.classList.add('feedback-correct');
                            }
                            
                            // Check if the user selected this option and it was wrong
                            if (input === selectedOption && !isCorrect) {
                                label.classList.add('feedback-incorrect');
                                // Ensure the correct answer is also highlighted green if the user was wrong
                                options.forEach(l => {
                                    if (l.querySelector('input').value === item.correctAnswer) {
                                        l.classList.add('feedback-correct');
                                    }
                                });
                            }
                        });
                    });

                    // 1. Display Score
                    const scoreText = document.getElementById('score-text');
                    scoreText.textContent = `You scored ${score} out of ${totalQuestions} points!`;
                    document.getElementById('result-box').classList.remove('hidden');

                    // 2. Disable Form and Update Button
                    document.getElementById('quiz-form').classList.add('quiz-submitted');
                    const submitBtn = document.getElementById('submit-quiz-btn');
                    submitBtn.textContent = 'Results Shown';
                    submitBtn.classList.remove('hover:bg-green-700');
                    submitBtn.classList.add('bg-gray-400', 'cursor-default');

                    // Scroll to results
                    document.getElementById('result-box').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }

                // Initialize quiz and attach event listener
                window.onload = function() {
                    renderQuiz();
                    document.getElementById('quiz-form').addEventListener('submit', handleSubmit);
                    lucide.createIcons(); // Initialize Lucide icons
                };
            </script>
        </form>

    </main>

    <footer class="bg-gray-200 dark:bg-gray-800 text-gray-600 dark:text-gray-400 py-6 mt-12 border-t border-gray-300 dark:border-gray-700">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm">
            <p>A dynamically generated quiz based on your questions.</p>
        </div>
    </footer>

    <script>
        lucide.createIcons();
    </script>
</body>
</html>